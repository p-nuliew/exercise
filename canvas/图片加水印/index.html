<canvas id="watermarkCanvas" style="display: none"></canvas>
<img id="imageWithWatermark" src="" alt="Image with Watermark" />

<script>
  function addWatermarkToImage(imageSrc, watermarkText) {
    const canvas = document.getElementById('watermarkCanvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();

    img.src = imageSrc;
    img.onload = () => {
      // 设置canvas大小与图片一致
      canvas.width = img.width;
      canvas.height = img.height;

      // 绘制图片
      ctx.drawImage(img, 0, 0);

      // 设置水印样式
      ctx.font = '48px sans-serif';
      ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
      ctx.textAlign = 'right';
      ctx.textBaseline = 'bottom';

      // 绘制水印
      ctx.fillText(watermarkText, img.width - 20, img.height - 20);

      // 将带水印的图片显示到页面上
      const imageWithWatermark = document.getElementById('imageWithWatermark');
      imageWithWatermark.src = canvas.toDataURL('image/png');
    };
  }

  // Example usage
  addWatermarkToImage('../../assets/123.jpg', 'Your Watermark Text');
</script>
