<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    function CreatePerson (name, age) {
      this.name = name
      this.age = age
      this.run = function () {
        console.log(`构造函数中的：调用此方法${this.name}就会开始奔跑`)
      }
    }

    CreatePerson.prototype.run = function () {
      console.log(`调用此方法${this.name}就会开始奔跑`)
    }

    const p1 = new CreatePerson('张三', 20)

    const p2 = new CreatePerson('李四', 30)
    const p3 = new CreatePerson('王五', 40)
    p1.run()
    p2.run()
    p3.run()

    // function myNew (Fn, ...args) {
    //   // 1.创建一个新对象，该对象为最终返回的实例
    //   let res = {}

    //   // 2.将新对象的原型执行构造函数的原型
    //   if (Fn.prototype !== null) {
    //     // res.__proto__ = Fn.prototype
    //     Object.setPrototypeOf(res, Fn.prototype)
    //   }

    //   // 3.将构造函数的 this 指向新对象
    //   ret = Fn.apply(res, args)

    //   // 4.如果函数返回了对象或者函数，那么这个返回值取代第一部创建的新对象
    //   if ((typeof ret === 'Object' || typeof ret === 'function') && ret !== null) {
    //     return ret
    //   }

    //   return res
    // }

    // const p1 = myNew(CreatePerson, '张三', 20)
    // const p2 = myNew(CreatePerson, '李四', 30)
    // const p3 = myNew(CreatePerson, '王五', 40)
    // p1.run()
    // p2.run()
    // p3.run()

  </script>
</body>
</html>